(function(p,u,g){"use strict";function U(o){return o&&o.__esModule?o:{default:o}}var e=U(g);const b=({property:o,record:n,onChange:r})=>{const{translateProperty:t}=u.useTranslation(),{params:m}=n,{custom:l}=o,i=u.flat.get(m,l.filePathProperty),a=u.flat.get(m,l.keyProperty),c=u.flat.get(m,l.fileProperty),[f,x]=g.useState(a),[E,T]=g.useState([]);g.useEffect(()=>{(typeof a=="string"&&a!==f||typeof a!="string"&&!f||typeof a!="string"&&Array.isArray(a)&&a.length!==f.length)&&(x(a),T([]))},[a,f]);const F=s=>{T(s),r(l.fileProperty,s)},C=()=>{r(l.fileProperty,null)},I=s=>{const d=(u.flat.get(n.params,l.keyProperty)||[]).indexOf(s),w=u.flat.get(n.params,l.filesToDeleteProperty)||[];if(i&&i.length>0){const J=i.map((_,S)=>S!==d?_:null);let h=u.flat.set(n.params,l.filesToDeleteProperty,[...w,d]);h=u.flat.set(h,l.filePathProperty,J),r({...n,params:h})}else console.log("You cannot remove file when there are no uploaded files yet")};return e.default.createElement(p.FormGroup,null,e.default.createElement(p.Label,null,t(o.label,o.resourceId)),e.default.createElement(p.DropZone,{onChange:F,multiple:l.multiple,validate:{mimeTypes:l.mimeTypes,maxSize:l.maxSize},files:E}),!l.multiple&&a&&i&&!E.length&&c!==null&&e.default.createElement(p.DropZoneItem,{filename:a,src:i,onRemove:C}),l.multiple&&a&&a.length&&i?e.default.createElement(e.default.Fragment,null,a.map((s,d)=>i[d]?e.default.createElement(p.DropZoneItem,{key:s,filename:s,src:i[d],onRemove:()=>I(s)}):"")):"")},v=["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","application/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp2"],D=["image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/vnd.microsoft.icon","image/tiff","image/webp"],y=o=>{const{name:n,path:r,mimeType:t,width:m}=o;if(r&&r.length){if(t&&D.includes(t))return e.default.createElement("img",{src:r,style:{maxHeight:m,maxWidth:m},alt:n});if(t&&v.includes(t))return e.default.createElement("audio",{controls:!0,src:r},"Your browser does not support the",e.default.createElement("code",null,"audio"),e.default.createElement("track",{kind:"captions"}))}return e.default.createElement(p.Box,null,e.default.createElement(p.Button,{as:"a",href:r,ml:"default",size:"sm",rounded:!0,target:"_blank"},e.default.createElement(p.Icon,{icon:"DocumentDownload",color:"white",mr:"default"}),n))},P=({width:o,record:n,property:r})=>{const{custom:t}=r;let m=u.flat.get(n?.params,t.filePathProperty);if(!m)return null;const l=u.flat.get(n?.params,t.fileNameProperty?t.fileNameProperty:t.keyProperty),i=t.mimeTypeProperty&&u.flat.get(n?.params,t.mimeTypeProperty);if(!r.custom.multiple)return t.opts&&t.opts.baseUrl&&(m=`${t.opts.baseUrl}/${l}`),e.default.createElement(y,{path:m,name:l,width:o,mimeType:i});if(t.opts&&t.opts.baseUrl){const a=t.opts.baseUrl||"";m=m.map((c,f)=>`${a}/${l[f]}`)}return e.default.createElement(e.default.Fragment,null,m.map((a,c)=>e.default.createElement(y,{key:a,path:a,name:l[c],width:o,mimeType:i[c]})))},k=o=>e.default.createElement(P,{width:100,...o}),A=o=>{const{property:n}=o,{translateProperty:r}=u.useTranslation();return e.default.createElement(p.FormGroup,null,e.default.createElement(p.Label,null,r(n.label,n.resourceId)),e.default.createElement(P,{width:"100%",...o}))};AdminJS.UserComponents={},AdminJS.UserComponents.UploadEditComponent=b,AdminJS.UserComponents.UploadListComponent=k,AdminJS.UserComponents.UploadShowComponent=A})(AdminJSDesignSystem,AdminJS,React);
